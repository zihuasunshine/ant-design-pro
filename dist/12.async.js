(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[12],{"1mUR":function(e,t,a){"use strict";var l=a("284h"),n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var i=n(a("kLXV"));a("DZo9");var r=n(a("8z0m"));a("Pwec");var u=n(a("CtXQ")),s=n(a("lwsE")),d=n(a("W8MJ")),o=n(a("a1gu")),f=n(a("Nsbk")),c=n(a("7W2i")),p=l(a("q1tI"));n(a("17x9"));a("WLYE");var m=function(e){function t(){var e,a;(0,s.default)(this,t);for(var l=arguments.length,n=new Array(l),i=0;i<l;i++)n[i]=arguments[i];return a=(0,o.default)(this,(e=(0,f.default)(t)).call.apply(e,[this].concat(n))),a.state={previewVisible:!1,previewImage:"",fileList:[]},a.count=0,a.handleCancel=function(){return a.setState({previewVisible:!1})},a.handlePreview=function(e){a.setState({previewImage:e.url||e.thumbUrl,previewVisible:!0})},a.handleChange=function(e){var t=e.file,l=e.fileList;if(a.count=a.count+1,a.setState({fileList:l}),3===a.count){var n=t.originFileObj,i=a.props.uploadImg;i(n),a.count=0}},a}return(0,c.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=this.state,t=e.previewVisible,a=e.previewImage,l=e.fileList,n=this.props.count,s=p.default.createElement("div",null,p.default.createElement(u.default,{type:"plus"}),p.default.createElement("div",{className:"ant-upload-text"},"Upload"));return p.default.createElement("div",{className:"clearfix"},p.default.createElement(r.default,{action:"",listType:"picture-card",fileList:l,onPreview:this.handlePreview,onChange:this.handleChange},l.length>=n?null:s),p.default.createElement(i.default,{visible:t,footer:null,onCancel:this.handleCancel},p.default.createElement("img",{alt:"picture",style:{width:"100%"},src:a})))}}]),t}(p.Component),g=m;t.default=g},V8qJ:function(e,t,a){"use strict";var l=a("TqRt"),n=a("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("IzEo");var i=l(a("bx4M"));a("+L6B");var r=l(a("2/Rp")),u=l(a("pVnL")),s=l(a("lwsE")),d=l(a("W8MJ")),o=l(a("a1gu")),f=l(a("Nsbk")),c=l(a("7W2i"));a("5NDa");var p=l(a("5rEg"));a("y8nQ");var m,g,h,v,b=l(a("Vl3Y")),E=n(a("q1tI")),w=a("MuoO"),q=l(a("usdK")),y=a("LLXN"),M=l(a("1mUR")),x=l(a("v99g")),I=(l(a("zHco")),b.default.Item),C=p.default.TextArea,L=(m=(0,w.connect)(function(e){var t=e.question,a=e.loading;return{question:t,submitting:a.effects["question/submit"]}}),g=b.default.create(),m(h=g((v=function(e){function t(e){var a;return(0,s.default)(this,t),a=(0,o.default)(this,(0,f.default)(t).call(this,e)),a.handleSubmit=function(e){e.preventDefault();var t=a.props,l=t.dispatch,n=t.form;n.validateFieldsAndScroll(function(e,t){var n=t.detail;a.imgs.length>0&&(t.imgs=a.imgs),n||delete t.detail,e||l({type:"question/submit",payload:t,token:sessionStorage.getItem("access_token")}).then(function(){var e=a.props.question.addQuestionRes;e&&200===e.code&&q.default.push("/")})})},a.uploadImg=function(e){var t=a.props.dispatch;return t({type:"question/upload",payload:{type:"question",file:e}}).then(function(){var e=a.props.question.uploadRes;200===e.code&&a.imgs.push(e.data.id)})},a.imgs=[],a}return(0,c.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=this.props.submitting,t=this.props.form,a=t.getFieldDecorator,l=(t.getFieldValue,{labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:12},md:{span:10}}}),n={wrapperCol:{xs:{span:24,offset:0},sm:{span:10,offset:7}}};return E.default.createElement(x.default,null,E.default.createElement(i.default,{bordered:!1},E.default.createElement(b.default,{onSubmit:this.handleSubmit,hideRequiredMark:!0,style:{marginTop:8}},E.default.createElement(I,(0,u.default)({},l,{label:E.default.createElement(y.FormattedMessage,{id:"form.question.title.label"})}),a("title",{rules:[{required:!0,message:(0,y.formatMessage)({id:"validation.question.title.required"})}]})(E.default.createElement(p.default,{placeholder:(0,y.formatMessage)({id:"form.question.title.placeholder"})}))),E.default.createElement(I,(0,u.default)({},l,{label:E.default.createElement(y.FormattedMessage,{id:"form.question.detail.label"})}),a("detail",{rules:[]})(E.default.createElement(C,{style:{minHeight:32},placeholder:(0,y.formatMessage)({id:"form.question.detail.placeholder"}),rows:4}))),E.default.createElement(I,(0,u.default)({},l,{label:E.default.createElement(y.FormattedMessage,{id:"form.question.imgs.label"})}),a("imgs",{})(E.default.createElement(M.default,{count:5,uploadImg:this.uploadImg}))),E.default.createElement(I,(0,u.default)({},n,{style:{marginTop:32}}),E.default.createElement(r.default,{type:"primary",htmlType:"submit",loading:e},sessionStorage.getItem("access_token")?E.default.createElement(y.FormattedMessage,{id:"form.submit"}):E.default.createElement(y.FormattedMessage,{id:"form.login.submit"}))))))}}]),t}(E.PureComponent),h=v))||h)||h),k=L;t.default=k},WLYE:function(e,t,a){e.exports={"ant-upload-select-picture-card":"antd-pro\\components\\-pictures-wall\\index-ant-upload-select-picture-card","ant-upload-text":"antd-pro\\components\\-pictures-wall\\index-ant-upload-text"}}}]);