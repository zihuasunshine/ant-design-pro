(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[24],{"0C3M":function(e,t,a){"use strict";var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a("lwsE")),r=n(a("W8MJ")),s=n(a("a1gu")),u=n(a("Nsbk")),i=n(a("7W2i"));a("Lzxq");var o=n(a("q1tI")),d=n(a("yEr3")),c=n(a("q6al")),f=function(e){function t(){var e,a;(0,l.default)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return a=(0,s.default)(this,(e=(0,u.default)(t)).call.apply(e,[this].concat(r))),a.state={editorState:d.default.createEditorState("<p>Hello <b>World!</b></p>"),outputHTML:"<p></p>"},a.handleChange=function(e){console.log(e),a.setState({editorState:e,outputHTML:e.toHTML()})},a.setEditorContentAsync=function(){a.isLivinig&&a.setState({editorState:d.default.createEditorState("<p>\u4f60\u597d\uff0c<b>\u4e16\u754c!</b><p>")})},a}return(0,i.default)(t,e),(0,r.default)(t,[{key:"componentDidMount",value:function(){this.isLivinig=!0,setTimeout(this.setEditorContentAsync,3e3)}},{key:"componentWillUnmount",value:function(){this.isLivinig=!1}},{key:"render",value:function(){var e=this.state,t=(e.editorState,e.outputHTML,["bold","italic","underline","text-color","separator","link","separator","media"]);return o.default.createElement("div",null,o.default.createElement("div",{className:c.default.editor_wrapper},o.default.createElement(d.default,{contentClassName:c.default.height,controls:t,onChange:this.handleChange})))}}]),t}(o.default.Component);t.default=f},"8eKy":function(e,t,a){e.exports={add_time:"antd-pro\\components\\-comment-list\\style-add_time",sub_comment:"antd-pro\\components\\-comment-list\\style-sub_comment",comment_wraper:"antd-pro\\components\\-comment-list\\style-comment_wraper"}},"9NTl":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAFmklEQVRYR62Xe2yTVRjGn+d83dxoGxFpJ8ZE1AVZ0RgRoqjBS6IGQRJQLlFjEDNBE2JQoviPQ4yJGuP9DyKKUaKCIDFeuZgoKnchakJbFEQhkrTjIq7dxvZ95zFf241ua9cxPX8157zneX/nfd/zfqfEIIcEk0033COjw+FI8ttByoCD2agTI4dmOmq/JDnB30+qMRhJvDUYrYoA/klbj146xVpnrDHWQvxR4CIAN512KAF4TdQnBggBvFLSoVA0+W4lqIoAmXTDKwAfqSRUZn1uKBp/p7+9/QJICGTTsSyI6sEACFoXjibuHDRAtrlhhMQjvQRcQB9Aej9Ya/f4a5lT5jICY2G5AOTIbnvpl1Bd4opBA7SkYzMIfNQlIGmrE8Bj1sMNACZCvCq3Ru0GsDEYObk82zz0DQD35+aFDjiaHBqe+LocRMkUZI6PvlwuZ1J8/HT4tQoGb8tiLcGzSwoKO43jTvc8p4lkY1EkNjln2Xm1Q/cd7L2vD0B7atTFLp39/uUqqvK/aLxp1jqLKfu0DIeVAjC0WWsDH4aqM+OzHaENAMYXRe9YKJqIkrDFe/sAtB4bPcF6ZmsPI6rRWtxOstYPOIDbegMY2bv8oFuajwG8A9nVoFnfw05t54XqDqb6BZDgZJsbDgMckc+j2gLwLvOjIvEEoM0Afynk3u8Ffg9AtfHmd1hnGYHrARjVdtahtWovyUhBZ0eoLnFNxRT4BtnmWJOEJXn/2gbiVYKrAO2R+Fmp8DuOu9zzAo0EnvTrhkbTrOUiAtfldOjdHI7s+2ZAAJlUwy0gN+aN9QXJzyQsA9AJYL2glCEOWcvZNPpc4h2OwRxrsaPLAWnnSZwKcLI/Z4x7wZDhv/41IICWVGwJiaZCBLY7wAuWXFcAWpFLj5AA8aiAvwkdMIYP9wAwmiYPi0FeXdBZFq5LPFQRoD1Vf0knq39irqfna8CpMqM9V3/m827vhszzENb4AP66iJ0B4CkXeCZXA2J7sNa9MNvmHAZZUwCXU4WLas9J5HUKo88tyKQaXgK5sIcR7YOynAj/ChlugsVKUk9ZcSGBcwBthOgEiPkutA/iKzQ2KZk3e+mMC0aSftMqD5BNxyYJ+hygOW2mIwHamzuteY7gLSCCEn4H/ZZMLx8ZBQDO8n8ZehMlswvg+V0aAtaEo/GZFVPgG+R6gZvr6/7drips2oWAfQCuWQmgZH8X8IOhN0syLwPMO5PaQS4NRuLPkfkr228Eihez6YbbBX5RNPezArqXnZgE4kYBQQIpCLuNw81G3t+d1qwgeW0h79Y4un7IucltvR2XrYHukAlO2/H6EZ5XneguyPyiC+ArCXtA7AVts/8IkTgD4N0AAt3OpIMB4raaaOK3MwLwX0GZ5thqB95qD+ZZgqPKCfQ7L23yowSD18ORxKpStn1uQf6xGXsPxD0SljL/GFk8KADY+wXzOqEghDmhusR7/daABGbTsZW+81z9QP8AbHQcexgy/ldMxnOPunSaAN7XQ0z2RQNsk9F2ibdSpkbEVACTCvWgUhDdEcg5b4693f2YKHNkH8oxvNXzMJfEgxBaRfsEYcZW2utfCVLzgpHk8j5FmEnHVlQWKJwFyFTRG+da1QRZdaAVminAhx/QEOyCcDTpv5zy/wuUHhPK0BtXskhk+nzBBKwNReKzSeSakE6OGZY5pS0ERvdMC1IydnZv3QCgmuHJLSTcATzLYz2ah4RPQ9H49C7nXeItLfURtFV/Vwwh4EA4Gq/vLyxnBFBwfqdPXkq0ALGVQM6pgEQ4Go/9XwAbgpH4lHLOu5xk0mPOE/R9DuK/Pst90Uw6l4INwQinkns7BlJlpyF0MhRNlKytPregnHAmHVt/Js6LIwHZl0J1Cb89lx0Va0AaWUP+0T6Qk/e2kerPIvef6m/vv5ZDhj+aFityAAAAAElFTkSuQmCC"},BpJf:function(e,t,a){e.exports={main:"antd-pro\\pages\\-question\\-answer-main",qtitle:"antd-pro\\pages\\-question\\-answer-qtitle",qicon:"antd-pro\\pages\\-question\\-answer-qicon",title_wrapper:"antd-pro\\pages\\-question\\-answer-title_wrapper",title:"antd-pro\\pages\\-question\\-answer-title",qDetail:"antd-pro\\pages\\-question\\-answer-qDetail",answer:"antd-pro\\pages\\-question\\-answer-answer",operator:"antd-pro\\pages\\-question\\-answer-operator",icon_wrapper:"antd-pro\\pages\\-question\\-answer-icon_wrapper",icon:"antd-pro\\pages\\-question\\-answer-icon",comment_wraper:"antd-pro\\pages\\-question\\-answer-comment_wraper",btn_wrapper:"antd-pro\\pages\\-question\\-answer-btn_wrapper",answer_btn:"antd-pro\\pages\\-question\\-answer-answer_btn",text:"antd-pro\\pages\\-question\\-answer-text",form_box:"antd-pro\\pages\\-question\\-answer-form_box",formitem:"antd-pro\\pages\\-question\\-answer-formitem",align_right:"antd-pro\\pages\\-question\\-answer-align_right",my_editor:"antd-pro\\pages\\-question\\-answer-my_editor",height:"antd-pro\\pages\\-question\\-answer-height"}},"I/0H":function(e,t,a){"use strict";var n=a("284h"),l=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("14J3");var r=l(a("BMrR"));a("+L6B");var s=l(a("2/Rp"));a("jCWc");var u=l(a("kPKH"));a("5NDa");var i=l(a("5rEg"));a("Mwp2");var o=l(a("VXEj"));a("Telt");var d=l(a("Tckk")),c=l(a("lwsE")),f=l(a("W8MJ")),m=l(a("a1gu")),p=l(a("Nsbk")),h=l(a("7W2i"));a("Pwec");var g=l(a("CtXQ")),v=n(a("q1tI")),w=a("LLXN"),E=l(a("wd/R")),y=l(a("8eKy")),A=function(e){var t=e.type,a=e.text;return v.default.createElement("span",{style:{marginLeft:46}},v.default.createElement(g.default,{type:t,style:{marginRight:8}}),a)},C=function(e){function t(e){var a;return(0,c.default)(this,t),a=(0,m.default)(this,(0,p.default)(t).call(this,e)),a.showInput=function(){var e=a.state.inputVisible;a.setState({inputVisible:!e})},a.saveInputRef=function(e){a.input=e},a.handleInputChange=function(e){a.setState({inputValue:e.target.value})},a.handleInputConfirm=function(){var e=a.state.inputValue;e||a.setState({inputVisible:!1})},a.handleClick=function(e){a.setState({currentId:e})},a.state={inputVisible:!0,inputValue:"",currentId:""},a}return(0,h.default)(t,e),(0,f.default)(t,[{key:"render",value:function(){var e=this,t=this.props.listData,a=this.state,n=(a.inputVisible,a.inputValue),l=a.currentId;return v.default.createElement(o.default,{size:"middle",locale:{emptyText:""},pagination:{onChange:function(e){console.log(e)},pageSize:3},dataSource:t,renderItem:function(t){return v.default.createElement("div",null,v.default.createElement(o.default.Item,{key:t.addTime,actions:[v.default.createElement(A,{onClick:function(){e.handleClick(t.id)},type:"message",text:t.commentsCount?t.commentsCount:""})]},v.default.createElement(o.default.Item.Meta,{avatar:v.default.createElement(d.default,{src:t.avatarFile}),h:!0,title:v.default.createElement("div",null,v.default.createElement("a",null,t.userName),v.default.createElement("span",{className:y.default.add_time},(0,E.default)(t.addTime).format("YYYY-MM-DD HH:mm"))),description:t.message})),t.id===l&&v.default.createElement("div",{className:y.default.comment_wraper},v.default.createElement(r.default,null,v.default.createElement(u.default,{span:22},v.default.createElement(i.default,{ref:e.saveInputRef,type:"text",style:{width:"98%"},value:n,placeholder:(0,w.formatMessage)({id:"rate_to_best_answer"}),onChange:e.handleInputChange,onPressEnter:e.handleInputConfirm})),v.default.createElement(u.default,{span:2},v.default.createElement(s.default,{type:"primary",onClick:function(){return e.handleComment(answer.answerId)}},"\u8bc4\u8bba")))),v.default.createElement("div",{className:y.default.sub_comment},v.default.createElement(o.default,{size:"small",locale:{emptyText:""},dataSource:t.commentlist,renderItem:function(e){return v.default.createElement(o.default.Item,{key:e.addTime},v.default.createElement(o.default.Item.Meta,{avatar:v.default.createElement(d.default,{src:e.avatarFile}),title:v.default.createElement("div",null,v.default.createElement("a",null,e.userName),v.default.createElement("span",{className:y.default.add_time},(0,E.default)(e.addTime).format("YYYY-MM-DD mm:ss"))),description:e.message}))}})))}})}}]),t}(v.Component),q=C;t.default=q},gdxr:function(e,t,a){"use strict";var n=a("TqRt"),l=a("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a("pVnL"));a("/zsF");var s=n(a("PArb"));a("14J3");var u=n(a("BMrR"));a("+L6B");var i=n(a("2/Rp"));a("5NDa");var o=n(a("5rEg"));a("jCWc");var d=n(a("kPKH"));a("DZo9");var c=n(a("8z0m"));a("Pwec");var f=n(a("CtXQ"));a("miYZ");var m=n(a("tsqr")),p=n(a("lwsE")),h=n(a("W8MJ")),g=n(a("a1gu")),v=n(a("Nsbk")),w=n(a("7W2i"));a("y8nQ");var E,y,A,C,q=n(a("Vl3Y")),I=l(a("q1tI")),b=a("MuoO"),k=n(a("usdK")),N=n(a("v99g")),_=(n(a("0C3M")),n(a("I/0H"))),M=n(a("yEr3")),R=a("Psm9"),D=(a("6xfc"),a("+n12")),V=a("LLXN"),S=n(a("BpJf")),L=n(a("9NTl")),x={xs:24,sm:24,md:24,lg:24,xl:24,xxl:24},T=q.default.Item,Q=["bold","italic","underline","text-color","separator","link","separator"],H=(E=(0,b.connect)(function(e){var t=e.question;return{question:t}}),y=q.default.create(),E(A=y((C=function(e){function t(e){var a;return(0,p.default)(this,t),a=(0,g.default)(this,(0,v.default)(t).call(this,e)),a.showInput=function(){var e=a.state.inputVisible;a.setState({inputVisible:!e})},a.saveInputRef=function(e){a.input=e},a.handleInputChange=function(e){a.setState({inputValue:e.target.value})},a.handleInputConfirm=function(){var e=a.state.inputValue;e||a.setState({inputVisible:!1})},a.getQuestionDetail=function(){var e=a.props.dispatch;e({type:"question/getDetail",id:a.id}).then(function(){var e=a.props.question.qDetailRes;if(200!==e.code)return m.default.error((0,V.formatMessage)({id:e.msg})+",\u5373\u5c06\u8df3\u8f6c\u5230\u9996\u9875"),void setTimeout(function(){k.default.push("/")},500);var t=e.data.answer;t&&a.isVote(t.answerId),t&&a.getComment(t.answerId)})},a.isVote=function(e){if(sessionStorage.getItem("access_token")){var t=a.props.dispatch;t({type:"question/isVote",params:{answerId:e}})}},a.getComment=function(e){var t=a.props.dispatch;t({type:"question/getComment",params:{answerId:e}})},a.handleVote=function(e,t){var n=a.props.dispatch;n({type:"question/vote",params:{answerId:t,voteValue:e}}).then(function(){})},a.handleComment=function(e){var t=a.state.inputValue,n=a.props.dispatch;t?n({type:"question/comment",params:{answerId:e,message:t},token:sessionStorage.getItem("access_token")}).then(function(){var t=a.props.question.commentRes;t&&200===t.code&&(a.getComment(e),a.setState({inputValue:""}))}):(0,D.notificationTip)((0,V.formatMessage)({id:"not_edit_content"}))},a.handleChange=function(e){a.setState({editorState:e})},a.uploadHandler=function(e){if(!e.file)return!1;var t=a.props.dispatch;t({type:"question/upload",payload:{type:"answer",file:e.file}}).then(function(){var e=a.props.question.uploadRes.data;a.setState({editorState:R.ContentUtils.insertMedias(a.state.editorState,[{type:"IMAGE",url:e.url}])})})},a.handleSubmit=function(e,t,n){e.preventDefault();var l=a.props,r=l.dispatch,s=l.form.validateFields,u=a.state.editorState;if(t)s(function(e,a){e||r({type:"question/perfectAnswer",params:{answerId:t,reason:a.reason,perfectAnswer:u.toHTML()}}).then(function(){k.default.push({pathname:"/"})})});else{if(!u.toText())return void(0,D.notificationTip)((0,V.formatMessage)({id:"not_edit_content"}));r({type:"question/answer",params:{questionId:n,content:u.toHTML()}}).then(function(){k.default.push({pathname:"/"})})}},a.state={inputVisible:!1,inputValue:"",editorState:M.default.createEditorState(null)},a.id=e.match.params.id,a}return(0,w.default)(t,e),(0,h.default)(t,[{key:"componentDidMount",value:function(){this.getQuestionDetail()}},{key:"render",value:function(){var e=this,t=[{key:"antd-uploader",type:"component",component:I.default.createElement(c.default,{accept:"image/*",showUploadList:!1,customRequest:this.uploadHandler},I.default.createElement("button",{type:"button",className:"control-item button upload-button","data-title":"\u63d2\u5165\u56fe\u7247"},I.default.createElement(f.default,{type:"picture",theme:"filled"})))}],a=this.props,n=a.question,l=n.qDetailRes,m=n.isVoteRes,p=n.commentRes,h=a.form.getFieldDecorator,g=m&&1==m.data,v=m&&0==m.data,w=m&&-1==m.data,E={},y={};l&&200===l.code&&(E=l.data.answer,y=l.data.question);var A=this.state,C=A.inputVisible,b=A.inputValue,k=A.editorState;return I.default.createElement(N.default,null,I.default.createElement("div",{className:S.default.main},I.default.createElement(u.default,null,I.default.createElement(d.default,x,I.default.createElement("h4",null,y.category_f_name&&y.category_f_name+">"+y.category_s_name+">"+y.category_t_name)),I.default.createElement(d.default,x,I.default.createElement("div",{className:S.default.qtitle},I.default.createElement(f.default,{type:"question-circle",className:S.default.qicon}),I.default.createElement("span",null,y.title)),I.default.createElement("div",{className:S.default.qDetail},y.detail)),E&&E.answerId?I.default.createElement(d.default,x,I.default.createElement("div",{className:S.default.title_wrapper},I.default.createElement("img",{alt:"best",src:L.default}),I.default.createElement("h3",{className:S.default.title},"\u6700\u4f73\u7b54\u6848")),I.default.createElement("div",{className:S.default.answer,dangerouslySetInnerHTML:{__html:E.answerContent}}),I.default.createElement("div",{className:S.default.operator},I.default.createElement("span",{className:S.default.icon_wrapper,onClick:v?function(){e.handleVote(1,E.answerId)}:function(){}},I.default.createElement(f.default,{type:"like",theme:g?"filled":"",className:S.default.icon}),E.agreeCount),I.default.createElement("span",{className:S.default.icon_wrapper,onClick:v?function(){e.handleVote(-1,E.answerId)}:function(){}},I.default.createElement(f.default,{type:"dislike",theme:w?"filled":"",className:S.default.icon}),E.againstCount),I.default.createElement("span",{title:"\u8bc4\u8bba",className:S.default.icon_wrapper,onClick:this.showInput},I.default.createElement(f.default,{type:"message",className:S.default.icon}),E.commentCount)),C&&I.default.createElement("div",{className:S.default.comment_wraper},I.default.createElement(u.default,null,I.default.createElement(d.default,{span:22},I.default.createElement(o.default,{ref:this.saveInputRef,type:"text",size:"large",style:{width:"98%"},value:b,placeholder:(0,V.formatMessage)({id:"rate_to_best_answer"}),onChange:this.handleInputChange,onPressEnter:this.handleInputConfirm})),I.default.createElement(d.default,{span:2},I.default.createElement(i.default,{type:"primary",size:"large",onClick:function(){return e.handleComment(E.answerId)}},"\u8bc4\u8bba"))),I.default.createElement(_.default,{listData:p&&200===p.code?p.data:[]}))):null),I.default.createElement(u.default,null,I.default.createElement(d.default,(0,r.default)({},x,{className:S.default.btn_wrapper}),I.default.createElement(s.default,{dashed:!0},I.default.createElement("div",{className:S.default.answer_btn},I.default.createElement(f.default,{type:"edit",className:S.default.icon}),I.default.createElement("span",{className:S.default.text},E&&E.answerId?(0,V.formatMessage)({id:"app.settings.perfect"}):(0,V.formatMessage)({id:"app.settings.answer"})))))),I.default.createElement(u.default,{className:S.default.form_box},I.default.createElement(d.default,x,I.default.createElement(q.default,{onSubmit:function(t){return e.handleSubmit(t,y.bestAnswer,y.id)}},y.bestAnswer?I.default.createElement(T,{className:S.default.formitem},h("reason",{rules:[{required:!0,message:(0,V.formatMessage)({id:"validation.reason.required"})}]})(I.default.createElement(o.default,{size:"large",placeholder:(0,V.formatMessage)({id:"form.reason.placeholder"})}))):null,I.default.createElement(T,null,I.default.createElement(M.default,{value:k,placeholder:(0,V.formatMessage)({id:"form.answer.placeholder"}),contentClassName:S.default.height,className:S.default.my_editor,onChange:this.handleChange,controls:Q,extendControls:t})),I.default.createElement("div",{className:S.default.align_right},I.default.createElement(i.default,{htmlType:"submit",type:"primary"},(0,V.formatMessage)({id:"app.settings.submit.answer"}))))))))}}]),t}(I.PureComponent),A=C))||A)||A),Z=H;t.default=Z},q6al:function(e,t,a){e.exports={editor_wrapper:"antd-pro\\components\\-rich-text-editor\\style-editor_wrapper",height:"antd-pro\\components\\-rich-text-editor\\style-height"}}}]);