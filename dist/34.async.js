(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[34],{YiZ1:function(e,t,a){e.exports={avatarHolder:"antd-pro\\pages\\-account\\-center\\-center-avatarHolder",name:"antd-pro\\pages\\-account\\-center\\-center-name",detail:"antd-pro\\pages\\-account\\-center\\-center-detail",title:"antd-pro\\pages\\-account\\-center\\-center-title",group:"antd-pro\\pages\\-account\\-center\\-center-group",address:"antd-pro\\pages\\-account\\-center\\-center-address",tagsTitle:"antd-pro\\pages\\-account\\-center\\-center-tagsTitle",teamTitle:"antd-pro\\pages\\-account\\-center\\-center-teamTitle",tags:"antd-pro\\pages\\-account\\-center\\-center-tags",team:"antd-pro\\pages\\-account\\-center\\-center-team",tabsCard:"antd-pro\\pages\\-account\\-center\\-center-tabsCard",center:"antd-pro\\pages\\-account\\-center\\-center-center"}},zMb4:function(e,t,a){"use strict";var n=a("TqRt"),r=a("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("14J3");var l=n(a("BMrR"));a("jCWc");var s=n(a("kPKH"));a("IzEo");var c=n(a("bx4M"));a("Pwec");var u=n(a("CtXQ"));a("5NDa");var o=n(a("5rEg"));a("+BJd");var d=n(a("mr32"));a("/zsF");var i=n(a("PArb")),p=n(a("RIqP"));a("miYZ");var f,g,m,h=n(a("tsqr")),v=n(a("lwsE")),E=n(a("W8MJ")),b=n(a("a1gu")),y=n(a("Nsbk")),k=n(a("7W2i")),T=r(a("q1tI")),C=a("MuoO"),w=(n(a("mOP9")),n(a("usdK"))),I=a("LLXN"),N=n(a("v99g")),S=n(a("YiZ1")),j=(f=(0,C.connect)(function(e){var t=e.center,a=e.loading,n=(e.user,e.project);return{center:t,listLoading:a.effects["list/fetch"],currentUserLoading:a.effects["user/fetchCurrent"],project:n,projectLoading:a.effects["project/fetchNotice"]}}),f((m=function(e){function t(e){var a;return(0,v.default)(this,t),a=(0,b.default)(this,(0,y.default)(t).call(this,e)),a.onTabChange=function(e){var t=a.props.match;switch(e){case"articles":w.default.push("".concat(t.url,"/articles"));break;case"applications":w.default.push("".concat(t.url,"/applications"));break;case"projects":w.default.push("".concat(t.url,"/projects"));break;default:break}},a.showInput=function(){a.setState({inputVisible:!0},function(){return a.input.focus()})},a.saveInputRef=function(e){a.input=e},a.handleInputChange=function(e){a.setState({inputValue:e.target.value})},a.handleInputConfirm=function(){var e=a.props.dispatch,t=a.state.inputValue,n=a.state.newTags;t?n.indexOf(t)>-1?h.default.error((0,I.formatMessage)({id:"tag_already_exists"})):(e({type:"center/addTag",tag:t,token:sessionStorage.getItem("access_token")}).then(function(){var e=a.props.center.addTagRes;if(200===e.code)n=[].concat((0,p.default)(n),[{id:"".concat(e.data),text:t}]),a.setState({newTags:n});else{var r=e.msg;h.default.error((0,I.formatMessage)({id:r}))}}),a.setState({inputVisible:!1,inputValue:""})):a.setState({inputVisible:!1})},a.handleClose=function(e){var t=a.props.dispatch;t({type:"center/deleteTag",tagId:e,token:sessionStorage.getItem("access_token")}).then(function(){var e=a.props.center.deleteTagRes;if(200===e.code);else{var t=addTagRes,n=t.msg;h.default.error((0,I.formatMessage)({id:n}))}})},a.state={newTags:e.currentUser?e.currentUser.tags:[],inputVisible:!1,inputValue:""},a.count=0,a}return(0,k.default)(t,e),(0,E.default)(t,[{key:"componentDidMount",value:function(){var e=this.props.dispatch;e({type:"list/fetch",payload:{count:8}}),e({type:"project/fetchNotice"})}},{key:"render",value:function(){var e=this,t=this.state,a=t.newTags,n=t.inputVisible,r=t.inputValue,p=sessionStorage.getItem("user")?JSON.parse(sessionStorage.getItem("user")):null,f=this.props,g=f.listLoading,m=f.currentUserLoading,h=(f.project.notice,f.projectLoading,f.match),v=f.location,E=f.children;0===this.count&&p&&(this.state.newTags=p.tags,this.count=1);var b=0==a.length&&p?p.tags:a,y=[{key:"articles",tab:T.default.createElement("span",null,"\u5f85\u56de\u7b54 ",T.default.createElement("span",{style:{fontSize:14}},"(8)"))},{key:"applications",tab:T.default.createElement("span",null,"\u6211\u7684\u63d0\u95ee ",T.default.createElement("span",{style:{fontSize:14}},"(8)"))},{key:"projects",tab:T.default.createElement("span",null,"\u6211\u7684\u56de\u7b54 ",T.default.createElement("span",{style:{fontSize:14}},"(8)"))}];return T.default.createElement(N.default,{className:S.default.userCenter},T.default.createElement(l.default,{gutter:24},T.default.createElement(s.default,{lg:7,md:24},T.default.createElement(c.default,{bordered:!1,style:{marginBottom:24},loading:m},p&&Object.keys(p).length?T.default.createElement("div",null,T.default.createElement("div",{className:S.default.avatarHolder},T.default.createElement("img",{alt:"",src:p.avatarFile}),T.default.createElement("div",{className:S.default.name},p.nickname),T.default.createElement("div",null,"\u4e2a\u4eba\u4e3b\u9875\uff1a",p.urlToken?p.urlToken:"\u6682\u65e0")),T.default.createElement("div",{className:S.default.detail},T.default.createElement("p",null,T.default.createElement("i",{className:S.default.address}),T.default.createElement("span",null,p.province,p.city))),T.default.createElement(i.default,{dashed:!0}),T.default.createElement("div",{className:S.default.center},"\u7814\u7a76\u751f\u9662\uff1a",p.applicationSchool?p.applicationSchool:"\u6682\u65e0"),T.default.createElement("div",{className:S.default.center},"\u4e13\u4e1a\uff1a",p.applicationProfession?p.applicationProfession:"\u6682\u65e0"),T.default.createElement(i.default,{dashed:!0}),T.default.createElement("div",{className:S.default.tags},T.default.createElement("div",{className:S.default.tagsTitle},"\u6807\u7b7e"),b.map(function(t){return T.default.createElement(d.default,{closable:!0,key:"key"+t.id,onClose:function(){return e.handleClose(t.id)}},t.text)}),n&&T.default.createElement(o.default,{ref:this.saveInputRef,type:"text",size:"small",style:{width:78},value:r,onChange:this.handleInputChange,onBlur:this.handleInputConfirm,onPressEnter:this.handleInputConfirm}),!n&&T.default.createElement(d.default,{onClick:this.showInput,style:{background:"#fff",borderStyle:"dashed"}},T.default.createElement(u.default,{type:"plus"})))):"loading...")),T.default.createElement(s.default,{lg:17,md:24},T.default.createElement(c.default,{className:S.default.tabsCard,bordered:!1,tabList:y,activeTabKey:v.pathname.replace("".concat(h.path,"/"),""),onTabChange:this.onTabChange,loading:g},E))))}}]),t}(T.PureComponent),g=m))||g),M=j;t.default=M}}]);