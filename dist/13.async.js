(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[13],{"1mUR":function(e,t,a){"use strict";var l=a("284h"),i=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var n=i(a("kLXV"));a("DZo9");var r=i(a("8z0m"));a("Pwec");var s=i(a("CtXQ")),u=i(a("lwsE")),d=i(a("W8MJ")),o=i(a("a1gu")),f=i(a("Nsbk")),c=i(a("7W2i")),p=l(a("q1tI"));i(a("17x9"));a("WLYE");var m=function(e){function t(){var e,a;(0,u.default)(this,t);for(var l=arguments.length,i=new Array(l),n=0;n<l;n++)i[n]=arguments[n];return a=(0,o.default)(this,(e=(0,f.default)(t)).call.apply(e,[this].concat(i))),a.state={previewVisible:!1,previewImage:"",fileList:[]},a.handleCancel=function(){return a.setState({previewVisible:!1})},a.handlePreview=function(e){a.setState({previewImage:e.url||e.thumbUrl,previewVisible:!0})},a.handleChange=function(e){var t=e.file,l=e.fileList;a.setState({fileList:l});var i=t.originFileObj,n=a.props.uploadImg;n(i)},a}return(0,c.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=this.state,t=e.previewVisible,a=e.previewImage,l=e.fileList,i=this.props.count,u=p.default.createElement("div",null,p.default.createElement(s.default,{type:"plus"}),p.default.createElement("div",{className:"ant-upload-text"},"Upload"));return p.default.createElement("div",{className:"clearfix"},p.default.createElement(r.default,{listType:"picture-card",fileList:l,onPreview:this.handlePreview,onChange:this.handleChange},l.length>=i?null:u),p.default.createElement(n.default,{visible:t,footer:null,onCancel:this.handleCancel},p.default.createElement("img",{alt:"picture",style:{width:"100%"},src:a})))}}]),t}(p.Component),g=m;t.default=g},V8qJ:function(e,t,a){"use strict";var l=a("TqRt"),i=a("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("IzEo");var n=l(a("bx4M"));a("+L6B");var r=l(a("2/Rp")),s=l(a("pVnL"));a("miYZ");var u=l(a("tsqr")),d=l(a("lwsE")),o=l(a("W8MJ")),f=l(a("a1gu")),c=l(a("Nsbk")),p=l(a("7W2i"));a("5NDa");var m=l(a("5rEg"));a("y8nQ");var g,h,v,b,E=l(a("Vl3Y")),w=i(a("q1tI")),q=a("MuoO"),y=l(a("usdK")),M=a("LLXN"),I=l(a("1mUR")),x=l(a("zHco")),k=E.default.Item,C=m.default.TextArea,L=(g=(0,q.connect)(function(e){var t=e.question,a=e.loading;return{question:t,submitting:a.effects["question/submit"]}}),h=E.default.create(),g(v=h((b=function(e){function t(e){var a;return(0,d.default)(this,t),a=(0,f.default)(this,(0,c.default)(t).call(this,e)),a.handleSubmit=function(e){if(e.preventDefault(),sessionStorage.getItem("access_token")){var t=a.props,l=t.dispatch,i=t.form;i.validateFieldsAndScroll(function(e,t){var i=t.detail;a.imgs.length>0&&(t.imgs=a.imgs),i||delete t.detail,e||l({type:"question/submit",payload:t,token:sessionStorage.getItem("access_token")}).then(function(){var e=a.props.question.addQuestionRes;200===e.code&&y.default.push("/")})})}else u.default.info((0,M.formatMessage)({id:"not_login"}))},a.uploadImg=function(e){var t=a.props.dispatch;return t({type:"question/upload",payload:{type:"question",file:e}}).then(function(){var e=a.props.question.uploadRes;200===e.code&&a.imgs.push(e.data.id)})},a.imgs=[],a}return(0,p.default)(t,e),(0,o.default)(t,[{key:"render",value:function(){var e=this.props.submitting,t=this.props.form,a=t.getFieldDecorator,l=(t.getFieldValue,{labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:12},md:{span:10}}}),i={wrapperCol:{xs:{span:24,offset:0},sm:{span:10,offset:7}}};return w.default.createElement(x.default,null,w.default.createElement(n.default,{bordered:!1},w.default.createElement(E.default,{onSubmit:this.handleSubmit,hideRequiredMark:!0,style:{marginTop:8}},w.default.createElement(k,(0,s.default)({},l,{label:w.default.createElement(M.FormattedMessage,{id:"form.question.title.label"})}),a("title",{rules:[{required:!0,message:(0,M.formatMessage)({id:"validation.question.title.required"})}]})(w.default.createElement(m.default,{placeholder:(0,M.formatMessage)({id:"form.question.title.placeholder"})}))),w.default.createElement(k,(0,s.default)({},l,{label:w.default.createElement(M.FormattedMessage,{id:"form.question.detail.label"})}),a("detail",{rules:[]})(w.default.createElement(C,{style:{minHeight:32},placeholder:(0,M.formatMessage)({id:"form.question.detail.placeholder"}),rows:4}))),w.default.createElement(k,(0,s.default)({},l,{label:w.default.createElement(M.FormattedMessage,{id:"form.question.imgs.label"})}),a("imgs",{})(w.default.createElement(I.default,{count:5,uploadImg:this.uploadImg}))),w.default.createElement(k,(0,s.default)({},i,{style:{marginTop:32}}),w.default.createElement(r.default,{type:"primary",htmlType:"submit",loading:e},sessionStorage.getItem("access_token")?w.default.createElement(M.FormattedMessage,{id:"form.submit"}):w.default.createElement(M.FormattedMessage,{id:"form.login.submit"}))))))}}]),t}(w.PureComponent),v=b))||v)||v),S=L;t.default=S},WLYE:function(e,t,a){e.exports={"ant-upload-select-picture-card":"antd-pro\\components\\-pictures-wall\\index-ant-upload-select-picture-card","ant-upload-text":"antd-pro\\components\\-pictures-wall\\index-ant-upload-text"}}}]);