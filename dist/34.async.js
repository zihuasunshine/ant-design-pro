(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[34],{YiZ1:function(e,t,a){e.exports={avatarHolder:"antd-pro\\pages\\-account\\-center\\-center-avatarHolder",name:"antd-pro\\pages\\-account\\-center\\-center-name",detail:"antd-pro\\pages\\-account\\-center\\-center-detail",title:"antd-pro\\pages\\-account\\-center\\-center-title",group:"antd-pro\\pages\\-account\\-center\\-center-group",address:"antd-pro\\pages\\-account\\-center\\-center-address",tagsTitle:"antd-pro\\pages\\-account\\-center\\-center-tagsTitle",teamTitle:"antd-pro\\pages\\-account\\-center\\-center-teamTitle",tags:"antd-pro\\pages\\-account\\-center\\-center-tags",team:"antd-pro\\pages\\-account\\-center\\-center-team",tabsCard:"antd-pro\\pages\\-account\\-center\\-center-tabsCard",center:"antd-pro\\pages\\-account\\-center\\-center-center"}},zMb4:function(e,t,a){"use strict";var n=a("TqRt"),l=a("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("IzEo");var r=n(a("bx4M"));a("T2oS");var c=n(a("W9HT"));a("14J3");var s=n(a("BMrR"));a("jCWc");var u=n(a("kPKH"));a("Telt");var d=n(a("Tckk"));a("Pwec");var o=n(a("CtXQ"));a("5NDa");var i=n(a("5rEg"));a("+BJd");var f=n(a("mr32"));a("/zsF");var p=n(a("PArb")),m=n(a("RIqP"));a("miYZ");var g,h,v,E=n(a("tsqr")),b=n(a("lwsE")),y=n(a("W8MJ")),k=n(a("a1gu")),T=n(a("Nsbk")),C=n(a("7W2i")),N=l(a("q1tI")),w=a("MuoO"),I=n(a("mOP9")),j=n(a("usdK")),S=a("LLXN"),M=n(a("v99g")),P=n(a("YiZ1")),L=(g=(0,w.connect)(function(e){var t=e.center,a=e.loading,n=e.user,l=e.project;return{center:t,listLoading:a.effects["list/fetch"],currentUser:n.currentUser.data,currentUserLoading:a.effects["user/fetchCurrent"],project:l,projectLoading:a.effects["project/fetchNotice"]}}),g((v=function(e){function t(e){var a;return(0,b.default)(this,t),a=(0,k.default)(this,(0,T.default)(t).call(this,e)),a.onTabChange=function(e){var t=a.props.match;switch(e){case"articles":j.default.push("".concat(t.url,"/articles"));break;case"applications":j.default.push("".concat(t.url,"/applications"));break;case"projects":j.default.push("".concat(t.url,"/projects"));break;default:break}},a.showInput=function(){a.setState({inputVisible:!0},function(){return a.input.focus()})},a.saveInputRef=function(e){a.input=e},a.handleInputChange=function(e){a.setState({inputValue:e.target.value})},a.handleInputConfirm=function(){var e=a.props.dispatch,t=a.state.inputValue,n=a.state.newTags;t?n.indexOf(t)>-1?E.default.error((0,S.formatMessage)({id:"tag_already_exists"})):(e({type:"center/addTag",tag:t,token:sessionStorage.getItem("access_token")}).then(function(){var e=a.props.center.addTagRes;if(200===e.code)n=[].concat((0,m.default)(n),[{id:"".concat(e.data),text:t}]),a.setState({newTags:n});else{var l=e.msg;E.default.error((0,S.formatMessage)({id:l}))}}),a.setState({inputVisible:!1,inputValue:""})):E.default.error((0,S.formatMessage)({id:"ag_cant_be_empty"}))},a.handleClose=function(e){var t=a.props.dispatch;t({type:"center/deleteTag",tagId:e,token:sessionStorage.getItem("access_token")}).then(function(){var e=a.props.center.deleteTagRes;if(200===e.code);else{var t=addTagRes,n=t.msg;E.default.error((0,S.formatMessage)({id:n}))}})},a.state={newTags:e.currentUser?e.currentUser.tags:[],inputVisible:!1,inputValue:""},a.count=0,a}return(0,C.default)(t,e),(0,y.default)(t,[{key:"componentDidMount",value:function(){var e=this.props.dispatch;e({type:"list/fetch",payload:{count:8}}),e({type:"project/fetchNotice"})}},{key:"render",value:function(){var e=this,t=this.state,a=t.newTags,n=t.inputVisible,l=t.inputValue,m=this.props,g=m.listLoading,h=m.currentUser,v=m.currentUserLoading,E=m.project.notice,b=m.projectLoading,y=m.match,k=m.location,T=m.children;console.log(h),0===this.count&&h&&(this.state.newTags=h.tags,this.count=1);var C=0==a.length&&h?h.tags:a,w=[{key:"articles",tab:N.default.createElement("span",null,"\u5f85\u56de\u7b54 ",N.default.createElement("span",{style:{fontSize:14}},"(8)"))},{key:"applications",tab:N.default.createElement("span",null,"\u6211\u7684\u63d0\u95ee ",N.default.createElement("span",{style:{fontSize:14}},"(8)"))},{key:"projects",tab:N.default.createElement("span",null,"\u6211\u7684\u56de\u7b54 ",N.default.createElement("span",{style:{fontSize:14}},"(8)"))}];return N.default.createElement(M.default,{className:P.default.userCenter},N.default.createElement(s.default,{gutter:24},N.default.createElement(u.default,{lg:7,md:24},N.default.createElement(r.default,{bordered:!1,style:{marginBottom:24},loading:v},h&&Object.keys(h).length?N.default.createElement("div",null,N.default.createElement("div",{className:P.default.avatarHolder},N.default.createElement("img",{alt:"",src:h.avatarFile}),N.default.createElement("div",{className:P.default.name},h.nickname),N.default.createElement("div",null,"\u4e2a\u4eba\u4e3b\u9875\uff1a",h.urlToken?h.urlToken:"\u6682\u65e0")),N.default.createElement("div",{className:P.default.detail},N.default.createElement("p",null,N.default.createElement("i",{className:P.default.title}),h.title),N.default.createElement("p",null,N.default.createElement("i",{className:P.default.group}),h.group),N.default.createElement("p",null,N.default.createElement("i",{className:P.default.address}),h.geographic&&h.geographic.province.label,h.geographic&&h.geographic.city.label)),N.default.createElement(p.default,{dashed:!0}),N.default.createElement("div",{className:P.default.center},"\u7814\u7a76\u751f\u9662\uff1a",h.applicationSchool?h.applicationSchool:"\u6682\u65e0"),N.default.createElement("div",{className:P.default.center},"\u4e13\u4e1a\uff1a",h.applicationProfession?h.applicationProfession:"\u6682\u65e0"),N.default.createElement(p.default,{dashed:!0}),N.default.createElement("div",{className:P.default.tags},N.default.createElement("div",{className:P.default.tagsTitle},"\u6807\u7b7e"),C.map(function(t){return N.default.createElement(f.default,{closable:!0,key:"key"+t.id,onClose:function(){return e.handleClose(t.id)}},t.text)}),n&&N.default.createElement(i.default,{ref:this.saveInputRef,type:"text",size:"small",style:{width:78},value:l,onChange:this.handleInputChange,onBlur:this.handleInputConfirm,onPressEnter:this.handleInputConfirm}),!n&&N.default.createElement(f.default,{onClick:this.showInput,style:{background:"#fff",borderStyle:"dashed"}},N.default.createElement(o.default,{type:"plus"}))),N.default.createElement(p.default,{style:{marginTop:16},dashed:!0}),N.default.createElement("div",{className:P.default.team},N.default.createElement("div",{className:P.default.teamTitle},"\u56e2\u961f"),N.default.createElement(c.default,{spinning:b},N.default.createElement(s.default,{gutter:36},E.map(function(e){return N.default.createElement(u.default,{key:e.id,lg:24,xl:12},N.default.createElement(I.default,{to:e.href},N.default.createElement(d.default,{size:"small",src:e.logo}),e.member))}))))):"loading...")),N.default.createElement(u.default,{lg:17,md:24},N.default.createElement(r.default,{className:P.default.tabsCard,bordered:!1,tabList:w,activeTabKey:k.pathname.replace("".concat(y.path,"/"),""),onTabChange:this.onTabChange,loading:g},T))))}}]),t}(N.PureComponent),h=v))||h),V=L;t.default=V}}]);