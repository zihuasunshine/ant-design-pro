(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[24],{"0C3M":function(e,t,a){"use strict";var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a("lwsE")),s=n(a("W8MJ")),r=n(a("a1gu")),i=n(a("Nsbk")),o=n(a("7W2i"));a("Lzxq");var u=n(a("q1tI")),d=n(a("yEr3")),c=n(a("q6al")),m=function(e){function t(){var e,a;(0,l.default)(this,t);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return a=(0,r.default)(this,(e=(0,i.default)(t)).call.apply(e,[this].concat(s))),a.state={editorState:d.default.createEditorState("<p>Hello <b>World!</b></p>"),outputHTML:"<p></p>"},a.handleChange=function(e){console.log(e),a.setState({editorState:e,outputHTML:e.toHTML()})},a.setEditorContentAsync=function(){a.isLivinig&&a.setState({editorState:d.default.createEditorState("<p>\u4f60\u597d\uff0c<b>\u4e16\u754c!</b><p>")})},a}return(0,o.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){this.isLivinig=!0,setTimeout(this.setEditorContentAsync,3e3)}},{key:"componentWillUnmount",value:function(){this.isLivinig=!1}},{key:"render",value:function(){var e=this.state,t=(e.editorState,e.outputHTML,["bold","italic","underline","text-color","separator","link","separator","media"]);return u.default.createElement("div",null,u.default.createElement("div",{className:c.default.editor_wrapper},u.default.createElement(d.default,{contentClassName:c.default.height,controls:t,onChange:this.handleChange})))}}]),t}(u.default.Component);t.default=m},"8eKy":function(e,t,a){e.exports={add_time:"antd-pro\\components\\-comment-list\\style-add_time",sub_comment:"antd-pro\\components\\-comment-list\\style-sub_comment",comment_wraper:"antd-pro\\components\\-comment-list\\style-comment_wraper"}},"9NTl":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAFmklEQVRYR62Xe2yTVRjGn+d83dxoGxFpJ8ZE1AVZ0RgRoqjBS6IGQRJQLlFjEDNBE2JQoviPQ4yJGuP9DyKKUaKCIDFeuZgoKnchakJbFEQhkrTjIq7dxvZ95zFf241ua9cxPX8157zneX/nfd/zfqfEIIcEk0033COjw+FI8ttByoCD2agTI4dmOmq/JDnB30+qMRhJvDUYrYoA/klbj146xVpnrDHWQvxR4CIAN512KAF4TdQnBggBvFLSoVA0+W4lqIoAmXTDKwAfqSRUZn1uKBp/p7+9/QJICGTTsSyI6sEACFoXjibuHDRAtrlhhMQjvQRcQB9Aej9Ya/f4a5lT5jICY2G5AOTIbnvpl1Bd4opBA7SkYzMIfNQlIGmrE8Bj1sMNACZCvCq3Ru0GsDEYObk82zz0DQD35+aFDjiaHBqe+LocRMkUZI6PvlwuZ1J8/HT4tQoGb8tiLcGzSwoKO43jTvc8p4lkY1EkNjln2Xm1Q/cd7L2vD0B7atTFLp39/uUqqvK/aLxp1jqLKfu0DIeVAjC0WWsDH4aqM+OzHaENAMYXRe9YKJqIkrDFe/sAtB4bPcF6ZmsPI6rRWtxOstYPOIDbegMY2bv8oFuajwG8A9nVoFnfw05t54XqDqb6BZDgZJsbDgMckc+j2gLwLvOjIvEEoM0Afynk3u8Ffg9AtfHmd1hnGYHrARjVdtahtWovyUhBZ0eoLnFNxRT4BtnmWJOEJXn/2gbiVYKrAO2R+Fmp8DuOu9zzAo0EnvTrhkbTrOUiAtfldOjdHI7s+2ZAAJlUwy0gN+aN9QXJzyQsA9AJYL2glCEOWcvZNPpc4h2OwRxrsaPLAWnnSZwKcLI/Z4x7wZDhv/41IICWVGwJiaZCBLY7wAuWXFcAWpFLj5AA8aiAvwkdMIYP9wAwmiYPi0FeXdBZFq5LPFQRoD1Vf0knq39irqfna8CpMqM9V3/m827vhszzENb4AP66iJ0B4CkXeCZXA2J7sNa9MNvmHAZZUwCXU4WLas9J5HUKo88tyKQaXgK5sIcR7YOynAj/ChlugsVKUk9ZcSGBcwBthOgEiPkutA/iKzQ2KZk3e+mMC0aSftMqD5BNxyYJ+hygOW2mIwHamzuteY7gLSCCEn4H/ZZMLx8ZBQDO8n8ZehMlswvg+V0aAtaEo/GZFVPgG+R6gZvr6/7drips2oWAfQCuWQmgZH8X8IOhN0syLwPMO5PaQS4NRuLPkfkr228Eihez6YbbBX5RNPezArqXnZgE4kYBQQIpCLuNw81G3t+d1qwgeW0h79Y4un7IucltvR2XrYHukAlO2/H6EZ5XneguyPyiC+ArCXtA7AVts/8IkTgD4N0AAt3OpIMB4raaaOK3MwLwX0GZ5thqB95qD+ZZgqPKCfQ7L23yowSD18ORxKpStn1uQf6xGXsPxD0SljL/GFk8KADY+wXzOqEghDmhusR7/daABGbTsZW+81z9QP8AbHQcexgy/ldMxnOPunSaAN7XQ0z2RQNsk9F2ibdSpkbEVACTCvWgUhDdEcg5b4693f2YKHNkH8oxvNXzMJfEgxBaRfsEYcZW2utfCVLzgpHk8j5FmEnHVlQWKJwFyFTRG+da1QRZdaAVminAhx/QEOyCcDTpv5zy/wuUHhPK0BtXskhk+nzBBKwNReKzSeSakE6OGZY5pS0ERvdMC1IydnZv3QCgmuHJLSTcATzLYz2ah4RPQ9H49C7nXeItLfURtFV/Vwwh4EA4Gq/vLyxnBFBwfqdPXkq0ALGVQM6pgEQ4Go/9XwAbgpH4lHLOu5xk0mPOE/R9DuK/Pst90Uw6l4INwQinkns7BlJlpyF0MhRNlKytPregnHAmHVt/Js6LIwHZl0J1Cb89lx0Va0AaWUP+0T6Qk/e2kerPIvef6m/vv5ZDhj+aFityAAAAAElFTkSuQmCC"},BpJf:function(e,t,a){e.exports={main:"antd-pro\\pages\\-question\\-answer-main",qtitle:"antd-pro\\pages\\-question\\-answer-qtitle",qicon:"antd-pro\\pages\\-question\\-answer-qicon",title_wrapper:"antd-pro\\pages\\-question\\-answer-title_wrapper",title:"antd-pro\\pages\\-question\\-answer-title",qDetail:"antd-pro\\pages\\-question\\-answer-qDetail",answer:"antd-pro\\pages\\-question\\-answer-answer",operator:"antd-pro\\pages\\-question\\-answer-operator",icon_wrapper:"antd-pro\\pages\\-question\\-answer-icon_wrapper",icon:"antd-pro\\pages\\-question\\-answer-icon",comment_wraper:"antd-pro\\pages\\-question\\-answer-comment_wraper",btn_wrapper:"antd-pro\\pages\\-question\\-answer-btn_wrapper",answer_btn:"antd-pro\\pages\\-question\\-answer-answer_btn",text:"antd-pro\\pages\\-question\\-answer-text",form_box:"antd-pro\\pages\\-question\\-answer-form_box",formitem:"antd-pro\\pages\\-question\\-answer-formitem",align_right:"antd-pro\\pages\\-question\\-answer-align_right",my_editor:"antd-pro\\pages\\-question\\-answer-my_editor",height:"antd-pro\\pages\\-question\\-answer-height"}},"I/0H":function(e,t,a){"use strict";var n=a("284h"),l=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("14J3");var s=l(a("BMrR"));a("+L6B");var r=l(a("2/Rp"));a("jCWc");var i=l(a("kPKH"));a("5NDa");var o=l(a("5rEg"));a("Mwp2");var u=l(a("VXEj"));a("Telt");var d=l(a("Tckk")),c=l(a("lwsE")),m=l(a("W8MJ")),f=l(a("a1gu")),p=l(a("Nsbk")),h=l(a("7W2i"));a("Pwec");var g=l(a("CtXQ")),v=n(a("q1tI")),w=a("LLXN"),E=l(a("wd/R")),C=l(a("8eKy")),y=function(e){function t(e){var a;return(0,c.default)(this,t),a=(0,f.default)(this,(0,p.default)(t).call(this,e)),a.showInput=function(){var e=a.state.inputVisible;a.setState({inputVisible:!e})},a.saveInputRef=function(e){a.input=e},a.handleInputChange=function(e){a.setState({inputValue:e.target.value})},a.handleInputConfirm=function(){var e=a.state.inputValue;e||a.setState({inputVisible:!1})},a.handleClick=function(e){a.setState({currentId:e})},a.handleComment=function(e,t){var n=a.state.inputValue,l=a.props.onHandleComment;l(n,e,t),a.setState({inputValue:""})},a.state={inputVisible:!0,inputValue:"",currentId:""},a}return(0,h.default)(t,e),(0,m.default)(t,[{key:"render",value:function(){var e=this,t=this.props.listData,a=this.state,n=(a.inputVisible,a.inputValue),l=a.currentId;return v.default.createElement(u.default,{size:"middle",itemLayout:"verticle",locale:{emptyText:""},pagination:t.length>0&&{onChange:function(e){console.log(e)},pageSize:3},dataSource:t,renderItem:function(t){return v.default.createElement("div",null,v.default.createElement(u.default.Item,{key:t.addTime,actions:[v.default.createElement("span",{style:{marginLeft:46},onClick:function(){e.handleClick(t.id)}},v.default.createElement(g.default,{type:"message",style:{marginRight:8}}),t.commentlist.length?t.commentlist.length:"")]},v.default.createElement(u.default.Item.Meta,{avatar:v.default.createElement(d.default,{src:t.avatarFile}),h:!0,title:v.default.createElement("div",null,v.default.createElement("a",null,t.userName),v.default.createElement("span",{className:C.default.add_time},(0,E.default)(t.addTime).format("YYYY-MM-DD HH:mm"))),description:t.message})),t.id===l&&v.default.createElement("div",{className:C.default.comment_wraper},v.default.createElement(s.default,null,v.default.createElement(i.default,{span:22},v.default.createElement(o.default,{ref:e.saveInputRef,type:"text",style:{width:"98%"},value:n,placeholder:(0,w.formatMessage)({id:"rate_to_best_answer"}),onChange:e.handleInputChange,onPressEnter:e.handleInputConfirm})),v.default.createElement(i.default,{span:2},v.default.createElement(r.default,{type:"primary",onClick:function(){return e.handleComment(t.answerId,t.id)}},"\u8bc4\u8bba")))),v.default.createElement("div",{className:C.default.sub_comment},v.default.createElement(u.default,{size:"small",locale:{emptyText:""},dataSource:t.commentlist,renderItem:function(e){return v.default.createElement(u.default.Item,{key:e.addTime},v.default.createElement(u.default.Item.Meta,{avatar:v.default.createElement(d.default,{src:e.avatarFile}),title:v.default.createElement("div",null,v.default.createElement("a",null,e.userName),v.default.createElement("span",{className:C.default.add_time},(0,E.default)(e.addTime).format("YYYY-MM-DD mm:ss"))),description:e.message}))}})))}})}}]),t}(v.Component),q=y;t.default=q},gdxr:function(e,t,a){"use strict";var n=a("TqRt"),l=a("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=n(a("pVnL"));a("/zsF");var r=n(a("PArb"));a("14J3");var i=n(a("BMrR"));a("+L6B");var o=n(a("2/Rp"));a("5NDa");var u=n(a("5rEg"));a("jCWc");var d=n(a("kPKH"));a("miYZ");var c=n(a("tsqr"));a("DZo9");var m=n(a("8z0m"));a("Pwec");var f=n(a("CtXQ")),p=n(a("lwsE")),h=n(a("W8MJ")),g=n(a("a1gu")),v=n(a("Nsbk")),w=n(a("7W2i"));a("y8nQ");var E,C,y,q,A=n(a("Vl3Y")),I=l(a("q1tI")),k=a("MuoO"),b=n(a("usdK")),_=n(a("v99g")),N=(n(a("0C3M")),n(a("I/0H"))),M=n(a("yEr3")),V=a("Psm9"),R=(a("6xfc"),a("+n12")),S=a("LLXN"),L=n(a("BpJf")),D=n(a("9NTl")),T={xs:24,sm:24,md:24,lg:24,xl:24,xxl:24},x=A.default.Item,Q=["bold","italic","underline","text-color","separator","link","separator"],H=(E=(0,k.connect)(function(e){var t=e.question;return{question:t}}),C=A.default.create(),E(y=C((q=function(e){function t(e){var a;return(0,p.default)(this,t),a=(0,g.default)(this,(0,v.default)(t).call(this,e)),a.extendControls=[{key:"antd-uploader",type:"component",component:I.default.createElement(m.default,{accept:"image/*",showUploadList:!1,customRequest:a.uploadHandler},I.default.createElement("button",{type:"button",className:"control-item button upload-button","data-title":"\u63d2\u5165\u56fe\u7247"},I.default.createElement(f.default,{type:"picture",theme:"filled"})))}],a.showInput=function(){var e=a.state.inputVisible;a.setState({inputVisible:!e})},a.saveInputRef=function(e){a.input=e},a.handleInputChange=function(e){a.setState({inputValue:e.target.value})},a.handleInputConfirm=function(){var e=a.state.inputValue;e||a.setState({inputVisible:!1})},a.getQuestionDetail=function(){var e=a.props.dispatch;e({type:"question/getDetail",id:a.id}).then(function(){var e=a.props.question.qDetailRes;if(200!==e.code)return c.default.error((0,S.formatMessage)({id:e.msg})+",\u5373\u5c06\u8df3\u8f6c\u5230\u9996\u9875"),void setTimeout(function(){b.default.push("/")},500);var t=e.data.answer;t&&a.isVote(t.answerId),t&&a.getComment(t.answerId)})},a.isVote=function(e){if(sessionStorage.getItem("access_token")){var t=a.props.dispatch;t({type:"question/isVote",params:{answerId:e}})}},a.getComment=function(e){var t=a.props.dispatch;t({type:"question/getComment",params:{answerId:e}})},a.handleVote=function(e,t){var n=a.props,l=n.dispatch,s=n.question.isVoteRes;if(s){var r=s.data;a.handleVoteTip(r,e,t)}else l({type:"question/isVote",params:{answerId:t}}).then(function(){var n=a.props,l=(n.dispatch,n.question.isVoteRes);l&&200===l.code&&a.handleVoteTip(l.data,e,t)})},a.handleVoteTip=function(e,t,n){var l=a.props.dispatch;1!==e?-1!==e?0===e&&l({type:"question/vote",params:{answerId:n,voteValue:t}}).then(function(){var e=a.props.question.isVoteRes;if(e&&200===e.code)if(1==t){var n=a.state.likeCount;a.setState({likeCount:n++})}else{var l=a.state.dislikeCount;a.setState({dislikeCount:l++})}}):(0,R.notificationTip)((0,S.formatMessage)({id:"has_voted_dislike"}),!1):(0,R.notificationTip)((0,S.formatMessage)({id:"has_voted_like"}),!0)},a.handleComment=function(e,t,n){var l=a.props.dispatch;e?l({type:"question/comment",params:{answerId:t,message:e,commentId:n},token:sessionStorage.getItem("access_token")}).then(function(){var e=a.props.question.commentRes;e&&200===e.code&&(a.getComment(t),a.setState({inputValue:""}))}):(0,R.notificationTip)((0,S.formatMessage)({id:"not_edit_content"}))},a.handleChange=function(e){a.setState({editorState:e})},a.uploadHandler=function(e){if(!e.file)return!1;var t=a.props.dispatch;t({type:"question/upload",payload:{type:"answer",file:e.file}}).then(function(){var e=a.props.question.uploadRes.data;a.setState({editorState:V.ContentUtils.insertMedias(a.state.editorState,[{type:"IMAGE",url:e.url}])})})},a.handleSubmit=function(e,t,n){e.preventDefault();var l=a.props,s=l.dispatch,r=l.form.validateFields,i=a.state.editorState;if(t)r(function(e,a){e||s({type:"question/perfectAnswer",params:{answerId:t,reason:a.reason,perfectAnswer:i.toHTML()}}).then(function(){b.default.push({pathname:"/"})})});else{if(!i.toText())return void(0,R.notificationTip)((0,S.formatMessage)({id:"not_edit_content"}));s({type:"question/answer",params:{questionId:n,content:i.toHTML()}}).then(function(){b.default.push({pathname:"/"})})}},a.state={inputVisible:!1,inputValue:"",editorState:M.default.createEditorState(null),likeCount:0,dislikeCount:0,commentCount:0,commentList:[]},a.count=0,a.id=e.match.params.id,a}return(0,w.default)(t,e),(0,h.default)(t,[{key:"componentDidMount",value:function(){this.getQuestionDetail()}},{key:"render",value:function(){var e=this,t=this.props,a=t.question,n=a.qDetailRes,l=a.isVoteRes,c=a.commentRes,m=t.form.getFieldDecorator,p=this.state,h=p.likeCount,g=p.dislikeCount,v=p.commentCount,w=(p.commentList,{}),E={};if(0===this.count&&n&&200===n.code&&c&&200===c.code){var C=n.data.answer;this.state.likeCount=C.agreeCount,this.state.dislikeCount=C.againstCount,this.state.commentCount=C.commentCount,this.state.commentList=c.data,this.count=1}var y=0==h&&n&&n.data?n.data.answer.agreeCount:h,q=0==g&&n&&n.data?n.data.answer.againstCount:g,k=0==v&&n&&n.data?n.data.answer.commentCount:v,b=l&&1==l.data,V=(l&&l.data,l&&-1==l.data);n&&200===n.code&&(w=n.data.answer,E=n.data.question);var R=this.state,H=R.inputVisible,Z=R.inputValue,B=R.editorState;return I.default.createElement(_.default,null,I.default.createElement("div",{className:L.default.main},I.default.createElement(i.default,null,I.default.createElement(d.default,T,I.default.createElement("h4",null,E.category_f_name&&E.category_f_name+">"+E.category_s_name+">"+E.category_t_name)),I.default.createElement(d.default,T,I.default.createElement("div",{className:L.default.qtitle},I.default.createElement(f.default,{type:"question-circle",className:L.default.qicon}),I.default.createElement("span",null,E.title)),I.default.createElement("div",{className:L.default.qDetail},E.detail)),w&&w.answerId?I.default.createElement(d.default,T,I.default.createElement("div",{className:L.default.title_wrapper},I.default.createElement("img",{alt:"best",src:D.default}),I.default.createElement("h3",{className:L.default.title},"\u6700\u4f73\u7b54\u6848")),I.default.createElement("div",{className:L.default.answer,dangerouslySetInnerHTML:{__html:w.answerContent}}),I.default.createElement("div",{className:L.default.operator},I.default.createElement("span",{className:L.default.icon_wrapper,onClick:function(){return e.handleVote(1,w.answerId)}},I.default.createElement(f.default,{type:"like",theme:b?"filled":"",className:L.default.icon}),y),I.default.createElement("span",{className:L.default.icon_wrapper,onClick:function(){return e.handleVote(-1,w.answerId)}},I.default.createElement(f.default,{type:"dislike",theme:V?"filled":"",className:L.default.icon}),q),I.default.createElement("span",{title:"\u8bc4\u8bba",className:L.default.icon_wrapper,onClick:this.showInput},I.default.createElement(f.default,{type:"message",className:L.default.icon}),k)),H&&I.default.createElement("div",{className:L.default.comment_wraper},I.default.createElement(i.default,null,I.default.createElement(d.default,{span:22},I.default.createElement(u.default,{ref:this.saveInputRef,type:"text",size:"large",style:{width:"98%"},value:Z,placeholder:(0,S.formatMessage)({id:"rate_to_best_answer"}),onChange:this.handleInputChange,onPressEnter:this.handleInputConfirm})),I.default.createElement(d.default,{span:2},I.default.createElement(o.default,{type:"primary",size:"large",onClick:function(){return e.handleComment(Z,w.answerId)}},"\u8bc4\u8bba"))),I.default.createElement(N.default,{onHandleComment:this.handleComment,listData:c&&200===c.code?c.data:[]}))):null),I.default.createElement(i.default,null,I.default.createElement(d.default,(0,s.default)({},T,{className:L.default.btn_wrapper}),I.default.createElement(r.default,{dashed:!0},I.default.createElement("div",{className:L.default.answer_btn},I.default.createElement(f.default,{type:"edit",className:L.default.icon}),I.default.createElement("span",{className:L.default.text},w&&w.answerId?(0,S.formatMessage)({id:"app.settings.perfect"}):(0,S.formatMessage)({id:"app.settings.answer"})))))),I.default.createElement(i.default,{className:L.default.form_box},I.default.createElement(d.default,T,I.default.createElement(A.default,{onSubmit:function(t){return e.handleSubmit(t,E.bestAnswer,E.id)}},E.bestAnswer?I.default.createElement(x,{className:L.default.formitem},m("reason",{rules:[{required:!0,message:(0,S.formatMessage)({id:"validation.reason.required"})}]})(I.default.createElement(u.default,{size:"large",placeholder:(0,S.formatMessage)({id:"form.reason.placeholder"})}))):null,I.default.createElement(x,null,I.default.createElement(M.default,{value:B,placeholder:(0,S.formatMessage)({id:"form.answer.placeholder"}),contentClassName:L.default.height,className:L.default.my_editor,onChange:this.handleChange,controls:Q,extendControls:this.extendControls})),I.default.createElement("div",{className:L.default.align_right},I.default.createElement(o.default,{htmlType:"submit",type:"primary"},(0,S.formatMessage)({id:"app.settings.submit.answer"}))))))))}}]),t}(I.PureComponent),y=q))||y)||y),Z=H;t.default=Z},q6al:function(e,t,a){e.exports={editor_wrapper:"antd-pro\\components\\-rich-text-editor\\style-editor_wrapper",height:"antd-pro\\components\\-rich-text-editor\\style-height"}}}]);