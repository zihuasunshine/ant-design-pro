(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[8],{VGLV:function(e,t,a){e.exports={row:"antd-pro\\pages\\-account\\-settings\\-geographic-view-row",item:"antd-pro\\pages\\-account\\-settings\\-geographic-view-item"}},dzOB:function(e,t,a){"use strict";var n=a("g09b"),i=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("+L6B");var o=n(a("2/Rp"));a("iQDF");var r=n(a("+eQT"));a("5NDa");var l=n(a("5rEg"));a("miYZ");var s=n(a("tsqr")),c=n(a("eHn4")),u=n(a("p0pE")),p=n(a("2Taf")),d=n(a("vZ4D")),f=n(a("l4Ni")),g=n(a("ujKo")),v=n(a("MhPg"));a("7Kak");var m=n(a("9yH6"));a("OaEy");var h=n(a("2fM7"));a("y8nQ");var b,y,w,E,k=n(a("Vl3Y")),M=i(a("q1tI")),_=a("LLXN"),S=a("MuoO"),I=n(a("gJV7")),V=n(a("uYNw")),O=(n(a("w4Dz")),n(a("U+0X"))),C=n(a("wd/R")),T=a("+n12"),D=k.default.Item,N=(h.default.Option,m.default.Group),P=(b=(0,S.connect)(function(e){var t=e.user,a=e.baseView;return{user:t,baseView:a}}),y=k.default.create(),b(w=y((E=function(e){function t(){var e,a;(0,p.default)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return a=(0,f.default)(this,(e=(0,g.default)(t)).call.apply(e,[this].concat(i))),a.state={avatar:""},a.uploadImg=function(e){var t=a.props.dispatch,n=(0,T.dataURLtoFile)(e);t({type:"baseView/uploadAvatar",params:{file:n}}).then(function(){var n=a.props.baseView.uploadImgRes;n&&200===n.code?((0,T.notificationTip)((0,_.formatMessage)({id:"avatar_update_success"}),!0),t({type:"user/fetchCurrent",token:sessionStorage.getItem("access_token")}).then(function(){a.setBaseInfo()}),a.setState({avatar:e})):(0,T.notificationTip)((0,_.formatMessage)({id:"avatar_update_faild"}))})},a.handleSubmit=function(e){e.preventDefault();var t=a.props,n=t.form.validateFields,i=t.dispatch;n(function(e,t){if(!e){var n=t.email,o=t.sex,r=t.birthday,l=t.nickname,s=t.urlToken,c=t.geographic,p=t.postgraduateTime,d=t.undergraduateSchool,f=t.applicationSchool,g=t.applicationProfession,v={};n&&(v.email=n),o&&(v.sex=o),r&&(v.birthday=r.format("YYYY-MM-DD")),l&&(v.nickname=l),s&&(v.urlToken=s),c&&(v.province=c.province.label?c.province.label:""),c&&(v.provinceCode=c.province.key?c.province.key:""),c&&(v.city=c.city.label?c.city.label:""),c&&(v.cityCode=c.city.key?c.city.key:""),p&&(v.postgraduateTime=p),d&&(v.undergraduateSchool=d),f&&(v.applicationSchool=f),g&&(v.applicationProfession=g),console.log(c),i({type:"baseView/submit",payload:(0,u.default)({},v),token:sessionStorage.getItem("access_token")}).then(function(){var e=a.props.baseView.updateRes;e&&200===e.code&&((0,T.notificationTip)((0,_.formatMessage)({id:"user_info_update_success"}),!0),i({type:"user/fetchCurrent",token:sessionStorage.getItem("access_token")}).then(function(){a.setBaseInfo()}))})}})},a.setBaseInfo=function(){var e=a.props.form,t=sessionStorage.getItem("user");if(t){var n=JSON.parse(t);n.geographic={province:{label:n.province||"",key:n.provinceCode||0},city:{label:n.city||"",key:n.cityCode||0}},Object.keys(e.getFieldsValue()).forEach(function(t){var a={};a[t]=n[t]||null,"birthday"===t?e.setFieldsValue((0,c.default)({},t,(0,C.default)(a[t],"YYYY-MM-DD"))):e.setFieldsValue(a)})}else s.default.info((0,_.formatMessage)({id:"not_login"}))},a.getViewDom=function(e){a.view=e},a}return(0,v.default)(t,e),(0,d.default)(t,[{key:"componentDidMount",value:function(){this.getAvatarURL(),this.setBaseInfo()}},{key:"getAvatarURL",value:function(){var e="",t=sessionStorage.getItem("user");e=t?JSON.parse(t).avatarFile:"https://gw.alipayobjects.com/zos/rmsportal/BiazfanxmamNRoxxVxka.png",this.setState({avatar:e})}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.state.avatar;return M.default.createElement("div",{className:I.default.baseView,ref:this.getViewDom},M.default.createElement("div",{className:I.default.left},M.default.createElement(k.default,{layout:"vertical",onSubmit:this.handleSubmit,hideRequiredMark:!0},M.default.createElement(D,{label:(0,_.formatMessage)({id:"app.settings.basic.email"})},e("email",{})(M.default.createElement(l.default,null))),M.default.createElement(D,{label:(0,_.formatMessage)({id:"app.settings.basic.sex"})},e("sex",{})(M.default.createElement(N,null,M.default.createElement(m.default,{value:"0"},"\u7537"),M.default.createElement(m.default,{value:"1"},"\u5973")))),M.default.createElement(D,{label:(0,_.formatMessage)({id:"app.settings.basic.birthday"})},e("birthday",{})(M.default.createElement(r.default,{placeholder:(0,_.formatMessage)({id:"app.settings.basic.birthday-placeholder"})}))),M.default.createElement(D,{label:(0,_.formatMessage)({id:"app.settings.basic.nickname"})},e("nickname",{})(M.default.createElement(l.default,null))),M.default.createElement(D,{label:(0,_.formatMessage)({id:"app.settings.basic.urlToken"})},e("urlToken",{})(M.default.createElement(l.default,{placeholder:(0,_.formatMessage)({id:"app.settings.basic.urlToken-placeholder"})}))),M.default.createElement(D,{label:(0,_.formatMessage)({id:"app.settings.basic.geographic"})},e("geographic",{rules:[]})(M.default.createElement(V.default,null))),M.default.createElement(D,{label:(0,_.formatMessage)({id:"app.settings.basic.postgraduateTime"})},e("postgraduateTime",{})(M.default.createElement(l.default,{placeholder:(0,_.formatMessage)({id:"app.settings.basic.postgraduateTime-placeholder"})}))),M.default.createElement(D,{label:(0,_.formatMessage)({id:"app.settings.basic.undergraduateSchool"})},e("undergraduateSchool",{})(M.default.createElement(l.default,{placeholder:(0,_.formatMessage)({id:"app.settings.basic.undergraduateSchool-placeholder"})}))),M.default.createElement(D,{label:(0,_.formatMessage)({id:"app.settings.basic.applicationSchool"})},e("applicationSchool",{})(M.default.createElement(l.default,{placeholder:(0,_.formatMessage)({id:"app.settings.basic.applicationSchool-placeholder"})}))),M.default.createElement(D,{label:(0,_.formatMessage)({id:"app.settings.basic.applicationProfession"})},e("applicationProfession",{})(M.default.createElement(l.default,{placeholder:(0,_.formatMessage)({id:"app.settings.basic.applicationProfession-placeholder"})}))),M.default.createElement(o.default,{type:"primary",htmlType:"submit"},M.default.createElement(_.FormattedMessage,{id:"app.settings.basic.update",defaultMessage:"Update Information"})))),M.default.createElement("div",{className:I.default.right},M.default.createElement(O.default,{avatar:t,onUploadImg:this.uploadImg})))}}]),t}(M.Component),w=E))||w)||w),x=P;t.default=x},gJV7:function(e,t,a){e.exports={baseView:"antd-pro\\pages\\-account\\-settings\\-base-view-baseView",left:"antd-pro\\pages\\-account\\-settings\\-base-view-left",right:"antd-pro\\pages\\-account\\-settings\\-base-view-right",btn_wrapper:"antd-pro\\pages\\-account\\-settings\\-base-view-btn_wrapper",upload_btn:"antd-pro\\pages\\-account\\-settings\\-base-view-upload_btn",btn_text:"antd-pro\\pages\\-account\\-settings\\-base-view-btn_text",avatar_title:"antd-pro\\pages\\-account\\-settings\\-base-view-avatar_title"}},uYNw:function(e,t,a){"use strict";var n=a("g09b"),i=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("T2oS");var o=n(a("W9HT")),r=n(a("2Taf")),l=n(a("vZ4D")),s=n(a("l4Ni")),c=n(a("ujKo")),u=n(a("MhPg"));a("OaEy");var p,d,f,g=n(a("2fM7")),v=i(a("q1tI")),m=a("MuoO"),h=n(a("VGLV")),b=g.default.Option,y={label:"",key:""},w=(p=(0,m.connect)(function(e){var t=e.geographic,a=t.province,n=t.isLoading,i=t.city;return{province:a,city:i,isLoading:n}}),p((f=function(e){function t(){var e,a;(0,r.default)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return a=(0,s.default)(this,(e=(0,c.default)(t)).call.apply(e,[this].concat(i))),a.componentDidMount=function(){var e=a.props.dispatch;e({type:"geographic/fetchProvince"})},a.getCityOption=function(){var e=a.props.city;return a.getOption(e)},a.getOption=function(e){return!e||e.length<1?v.default.createElement(b,{key:0,value:0},"\u6ca1\u6709\u627e\u5230\u9009\u9879"):e.map(function(e){return v.default.createElement(b,{key:e.id,value:e.id},e.name)})},a.selectProvinceItem=function(e){var t=a.props,n=t.dispatch,i=t.onChange;n({type:"geographic/fetchCity",payload:e.key}),i({province:e,city:y})},a.selectCityItem=function(e){var t=a.props,n=t.value,i=t.onChange;i({province:n.province,city:e})},a}return(0,u.default)(t,e),(0,l.default)(t,[{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.dispatch,n=t.value;!e.value&&n&&n.province&&a({type:"geographic/fetchCity",payload:n.province.key})}},{key:"getProvinceOption",value:function(){var e=this.props.province;return this.getOption(e)}},{key:"conversionObject",value:function(){var e=this.props.value;if(!e)return{province:y,city:y};var t=e.province,a=e.city;return{province:t||y,city:a||y}}},{key:"render",value:function(){var e=this.conversionObject(),t=e.province,a=e.city,n=this.props.isLoading;return v.default.createElement(o.default,{spinning:n,wrapperClassName:h.default.row},v.default.createElement(g.default,{className:h.default.item,value:t,labelInValue:!0,showSearch:!0,onSelect:this.selectProvinceItem},this.getProvinceOption()),v.default.createElement(g.default,{className:h.default.item,value:a,labelInValue:!0,showSearch:!0,onSelect:this.selectCityItem},this.getCityOption()))}}]),t}(v.PureComponent),d=f))||d),E=w;t.default=E},uy6Z:function(e,t,a){e.exports={area_code:"antd-pro\\pages\\-account\\-settings\\-phone-view-area_code",phone_number:"antd-pro\\pages\\-account\\-settings\\-phone-view-phone_number"}},w4Dz:function(e,t,a){"use strict";var n=a("tAuX"),i=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("5NDa");var o=i(a("5rEg")),r=i(a("2Taf")),l=i(a("vZ4D")),s=i(a("l4Ni")),c=i(a("ujKo")),u=i(a("MhPg")),p=n(a("q1tI")),d=i(a("uy6Z")),f=function(e){function t(){return(0,r.default)(this,t),(0,s.default)(this,(0,c.default)(t).apply(this,arguments))}return(0,u.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props,t=e.value,a=e.onChange,n=["",""];return t&&(n=t.split("-")),p.default.createElement(p.Fragment,null,p.default.createElement(o.default,{className:d.default.area_code,value:n[0],onChange:function(e){a("".concat(e.target.value,"-").concat(n[1]))}}),p.default.createElement(o.default,{className:d.default.phone_number,onChange:function(e){a("".concat(n[0],"-").concat(e.target.value))},value:n[1]}))}}]),t}(p.PureComponent),g=f;t.default=g}}]);